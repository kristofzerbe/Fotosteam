(function(){var n,f,u,ot,st,l,e,i,ht,ct,a,r,b,v,k,o,s,d,t,g,lt,p,h,nt,w,y,tt,it,rt,at,ut,ft,c,vt,et,yt,pt,wt;n=jQuery;e="#jquery-fullsizable";a="#fullsized_image_holder";y="fullsized_spinner";f=n('<div id="jquery-fullsizable"><div id="fullsized_image_holder" class="figure-bar"><\/div><div id="fullsized_command_holder"><\/div><\/div>');r=[];vt=[];et=[];yt="";pt="";wt="";i=0;t=null;tt=null;it=null;c=!1;h=function(){var t=r[i];return t.ratio=(t.naturalHeight/t.naturalWidth).toFixed(2),n(window).height()/t.ratio>n(window).width()?(n(t).width(n(window).width()),n(t).height(n(window).width()*t.ratio),n(t).css("margin-top",(n(window).height()-n(t).height())/2)):(n(t).height(n(window).height()),n(t).width(n(window).height()/t.ratio),n(t).css("margin-top",0))};b=function(n){return n.keyCode===27&&l(),t.navigation&&(n.keyCode===37&&p(!0),n.keyCode===39)?s(!0):void 0};p=function(n){return n==null&&(n=!1),i>0?w(r[i-1],-1,n):void 0};s=function(n){return n==null&&(n=!1),i+1===r.length&&c===!0&&l(),i<r.length-1?w(r[i+1],1,n):void 0};w=function(r,o,s){return o==null&&(o=1),s==null&&(s=!1),i=r.index,n(a).hide(),n(a).html(r),u.find("#fullsized_member_img").attr("src",r.memberAvatarUrl),f.find("#fullsized_member_name").text(r.memberPlainName),t.navigation&&(s===!0?ct():nt()),r.loaded!=null?(n(e).removeClass(y),h(),n(a).fadeIn("fast"),g(o)):(n(e).addClass(y),r.onload=function(){return h(),n(a).fadeIn("slow",function(){return n(e).removeClass(y)}),this.loaded=!0,g(o)},r.src=r.buffer_src)};g=function(n){var u;if(n===1&&i<r.length-1)u=r[i+1];else if((n===-1||i===r.length-1)&&i>0)u=r[i-1];else return;return r.length-i==2&&t.infinityLoad(),u.onload=function(){return this.loaded=!0},u.src===""?u.src=u.buffer_src:void 0};d=function(i,r){return n("body").append(f),n(window).bind("resize",h),w(i),n(e).hide().fadeIn(function(){return t.detach_id!=null&&(tt=n(window).scrollTop(),it=n("#"+t.detach_id).css("display"),n("#"+t.detach_id).css("display","none"),h()),ot(),n(document).trigger("fullsizable:opened",r)})};l=function(){return c===!0&&ft(),n(e).fadeOut(function(){return f.remove()}),st(),n(e).removeClass(y),at(),t.detach_id!=null&&(n("#"+t.detach_id).css("display",it),n(window).scrollTop(tt)),n(window).unbind("resize",h)};v=function(){return n(t.selector).each(function(){var u=n(this).attr("href"),i=et[u];return i||(i=new Image,i.buffer_src=u,i.index=r.length,i.detailUrl=n(this).attr("detailUrl"),i.memberPlainName=n(this).attr("plainName"),i.memberAvatarUrl=n(this).attr("avatarUrl"),i.memberAlias=n(this).attr("alias"),r.push(i),et[u]=i),t.openOnClick?n(this).unbind("click").click(function(n){return n.preventDefault(),t.reloadOnOpen&&v(),d(i,this)}):void 0})};ut=function(){var n=u.find("#fullsized_slideshow");n.removeClass("fullsized_slideshow-play").addClass("fullsized_slideshow-pause");window.refreshIntervalId=setInterval(function(){s(!0)},t.slideshowDelay);c=!0};ft=function(){var n=u.find("#fullsized_slideshow");n.removeClass("fullsized_slideshow-pause").addClass("fullsized_slideshow-play");clearInterval(window.refreshIntervalId);c=!1};lt=function(){if(t.navigation){if(f.find("#fullsized_go_prev").length==0){f.append('<a id="fullsized_go_prev" href="#prev"><\/a>');n(document).on("click","#fullsized_go_prev",function(n){return n.preventDefault(),n.stopPropagation(),p()})}if(f.find("#fullsized_go_next").length==0){f.append('<a id="fullsized_go_next" href="#next"><\/a>');n(document).on("click","#fullsized_go_next",function(n){return n.preventDefault(),n.stopPropagation(),s()})}}if(u=f.find("#fullsized_command_holder"),t.fullscreenButton&&ht()&&u.find("#fullsized_fullscreen").length==0){u.append('<a id="fullsized_fullscreen" class="tooltip-bottom" href="#fullscreen" title="'+t.titleFullscreen+'"><\/a>');n(document).on("click","#fullsized_fullscreen",function(n){return n.preventDefault(),n.stopPropagation(),rt()})}if(t.detailButton){if(u.find("#fullsized_detail").length===0){u.append('<a id="fullsized_detail" class="tooltip-bottom" href="#detail" title="'+t.titleDetail+'"><\/a>');n(document).on("click","#fullsized_detail",function(n){n.preventDefault();n.stopPropagation();window.location=r[i].detailUrl})}}else{var o=u.find("#fullsized_fullscreen");o&&o.css("right","65px")}if(t.avatarButton&&u.find("#fullsized_member").length===0){u.append('<a id="fullsized_member" class="tooltip-bottom" href="#member"><img id="fullsized_member_img" src="" /><\/a>');n(document).on("click","#fullsized_member",function(n){n.preventDefault();n.stopPropagation();window.location=window.location.origin+"/"+r[i].memberAlias+"/about"});u.append('<span id="fullsized_member_name"><\/span>')}if(t.slideshowButton&&u.find("#fullsized_slideshow").length==0){u.append('<a id="fullsized_slideshow" class="fullsized_slideshow-play tooltip-bottom" href="#slideshow" title="'+t.titleSlideshowStart+'"><\/a>');n(document).on("click","#fullsized_slideshow",function(n){return n.preventDefault(),n.stopPropagation(),c===!1?ut():ft()})}switch(t.clickBehaviour){case"close":return n(document).on("click",e,l);case"next":return n(document).on("click",e,function(){return s(!0)})}};ot=function(){return t.keyBindings&&n(document).bind("keydown",b),t.navigation&&(n(document).bind("fullsizable:next",function(){return s(!0)}),n(document).bind("fullsizable:prev",function(){return p(!0)})),n(".tooltip-bottom").tooltipster(),n(document).bind("fullsizable:close",l)};at=function(){return t.navigation&&(n(document).unbind("keydown",b),n(document).unbind("fullsizable:next"),n(document).unbind("fullsizable:prev")),n(".tooltip-bottom").tooltipster("destroy"),n(document).unbind("fullsizable:close")};ct=function(){if(u.is(":visible")===!0)return u.toggle(!1),n("#fullsized_go_prev").toggle(!1),n("#fullsized_go_next").toggle(!1),f.bind("mousemove",k)};o=null;k=function(n){var t;return o===null&&(o=[n.clientX,n.clientY]),t=Math.round(Math.sqrt(Math.pow(o[1]-n.clientY,2)+Math.pow(o[0]-n.clientX,2))),t>=10?(f.unbind("mousemove",k),o=null,nt()):void 0};nt=function(){return u.toggle(!0),n("#fullsized_go_prev").toggle(i!==0),n("#fullsized_go_next").toggle(i!==r.length-1)};n.fn.fullsizable=function(i){return t=n.extend({selector:this.selector,detach_id:null,navigation:!0,keyBindings:!0,closeButton:!1,detailButton:!1,avatarButton:!1,detailUrl:"",slideshowButton:!1,slideshowDelay:5e3,fullscreenButton:!0,openOnClick:!0,clickBehaviour:"close",preload:!0,reloadOnOpen:!1,infinityLoad:function(){},titleGoPrev:"PREVIOUS",titleGoNext:"NEXT",titleClose:"CLOSE",titleFullscreen:"FULLSCREEN",titleSlideshowStart:"SLIDESHOW PLAY",titleSlideshowPause:"SLIDESHOW PAUSE"},i||{}),lt(),t.preload&&v(),n(document).bind("fullsizable:reload",v),n(document).bind("fullsizable:slideshow",ut),n(document).bind("fullsizable:open",function(i,u){var o,f,s,e;for(t.reloadOnOpen&&v(),e=[],f=0,s=r.length;f<s;f++)o=r[f],o.buffer_src===n(u).attr("href")?e.push(d(o,u)):e.push(void 0);return e}),this};ht=function(){var n;return n=f.get(0),n.requestFullScreen||n.webkitRequestFullScreen||n.mozRequestFullScreen?!0:!1};st=function(){return rt(!0)};rt=function(n){var t;return(t=f.get(0),t.requestFullScreen)?document.fullScreen||n?document.exitFullScreen():t.requestFullScreen():t.webkitRequestFullScreen?document.webkitIsFullScreen||n?document.webkitCancelFullScreen():t.webkitRequestFullScreen():t.mozRequestFullScreen?document.mozFullScreen||n?document.mozCancelFullScreen():t.mozRequestFullScreen():void 0}}).call(this);
//# sourceMappingURL=jquery.fullsizable.min.js.map

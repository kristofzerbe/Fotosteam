jQuery.extend({highlight:function(n,t,i,r){var e,o,u,s,f;if(n.nodeType===3){if(e=n.data.match(t),e)return o=document.createElement(i||"span"),o.className=r||"highlight",u=n.splitText(e.index),u.splitText(e[0].length),s=u.cloneNode(!0),o.appendChild(s),u.parentNode.replaceChild(o,u),1}else if(n.nodeType===1&&n.childNodes&&!/(script|style)/i.test(n.tagName)&&!(n.tagName===i.toUpperCase()&&n.className===r))for(f=0;f<n.childNodes.length;f++)f+=jQuery.highlight(n.childNodes[f],t,i,r);return 0}});jQuery.fn.unhighlight=function(n){var t={className:"highlight",element:"span"};return jQuery.extend(t,n),this.find(t.element+"."+t.className).each(function(){var n=this.parentNode;n.replaceChild(this.firstChild,this);n.normalize()}).end()};jQuery.fn.highlight=function(n,t){var i={className:"highlight",element:"span",caseSensitive:!1,wordsOnly:!1},u,r,f;return(jQuery.extend(i,t),n.constructor===String&&(n=[n]),n=jQuery.grep(n,function(n){return n!=""}),n=jQuery.map(n,function(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}),n.length==0)?this:(u=i.caseSensitive?"":"i",r="("+n.join("|")+")",i.wordsOnly&&(r="\\b"+r+"\\b"),f=new RegExp(r,u),this.each(function(){jQuery.highlight(this,f,i.element,i.className)}))};
